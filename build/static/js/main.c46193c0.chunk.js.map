{"version":3,"sources":["components/Filter.js","services/persons.js","components/PersonForm.js","components/Persons.js","components/Notification.js","App.js","reportWebVitals.js","index.js"],"names":["Filter","persons","setPersons","searchName","setSearchName","value","onChange","event","preventDefault","target","personsCopy","forEach","p","name","toLowerCase","match","show","console","log","baseUrl","personService","create","object","axios","post","then","response","data","deleteId","id","delete","read","get","update","put","PersonForm","setMessage","useState","newName","setNewName","newNum","setNewNum","onSubmit","JSON","stringify","indexOf","window","confirm","element","newPerson","number","map","catch","length","concat","type","Persons","personToShow","clickDelete","splice","findIndex","item","onClick","Notification","message","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","startsWith","App","personsWithShow","setPersonsWithShow","useEffect","elem","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"kMAuBeA,EArBA,SAAC,GAAsD,IAArDC,EAAoD,EAApDA,QAASC,EAA2C,EAA3CA,WAAYC,EAA+B,EAA/BA,WAAYC,EAAmB,EAAnBA,cAgBhD,OACE,qDAAuB,uBAAOC,MAAOF,EAAYG,SAhBpB,SAACC,GAC9BA,EAAMC,iBACNJ,EAAcG,EAAME,OAAOJ,OAC3B,IAAIK,EAAcT,EAClBS,EAAYC,SAAQ,SAAAC,GACdA,EAAEC,KAAKC,cAAcC,MAAMR,EAAME,OAAOJ,MAAMS,eAChDF,EAAEI,MAAO,GAETJ,EAAEI,MAAO,EACTC,QAAQC,IAAI,iCAGhBhB,EAAWQ,GACXO,QAAQC,IAAI,gBAAiBX,EAAME,OAAOJ,c,gBCbxCc,EAAU,eA0BDC,EAJO,CACpBC,OArBa,SAACC,GAEd,OADgBC,IAAMC,KAAKL,EAASG,GACrBG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAmBjCC,SAhBO,SAACC,GAEhB,OADgBN,IAAMO,OAAN,UAAgBX,EAAhB,YAA2BU,IAC5BJ,MAAK,SAAAC,GAAQ,OAAIA,MAcdK,KAXP,WAEX,OADgBR,IAAMS,IAAIb,GACXM,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SASjBM,OANX,SAACJ,EAAIP,GAElB,OADgBC,IAAMW,IAAN,UAAaf,EAAb,YAAwBU,GAAMP,GAC/BG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UC2B5BQ,EA9CI,SAAC,GAAuC,IAAtClC,EAAqC,EAArCA,QAASC,EAA4B,EAA5BA,WAAYkC,EAAgB,EAAhBA,WACxC,EAA8BC,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAA4BF,mBAAS,IAArC,mBAAOG,EAAP,KAAeC,EAAf,KAmCA,OACE,uBAAMC,SA7BgB,SAACnC,GAEvB,GADAA,EAAMC,kBAC2C,IAA9CmC,KAAKC,UAAU3C,GAAS4C,QAAQP,IAEjC,GAAGQ,OAAOC,QAAP,UAAkBT,EAAlB,0EAAmG,CACpG,IAAIT,EACJ5B,EAAQU,SAAQ,SAAAqC,GACXA,EAAQnC,OAASyB,IAClBT,EAAKmB,EAAQnB,OAGjB,IAAMoB,EAAY,CAAEpB,GAAIA,EAAIhB,KAAMyB,EAASY,OAAQV,EAAQxB,MAAM,GACjEI,EAAca,OAAOJ,EAAIoB,GAAWxB,MAAK,SAAAC,GACvCT,QAAQC,IAAIQ,GACZxB,EAAWD,EAAQkD,KAAI,SAAAvC,GAAC,OAAIA,EAAEiB,KAAOH,EAASG,GAAKjB,EAAIc,MACvDT,QAAQC,IAAR,+BAAoCW,OACnCuB,OAAM,SAAA1B,GACPU,EAAW,kBAAD,OAAmBE,EAAnB,2CACVrB,QAAQC,IAAI,wBAGX,CACL,IAAM+B,EAAY,CAAEpB,GAAG5B,EAAQoD,OAAO,EAAGxC,KAAMyB,EAASY,OAAQV,EAAQxB,MAAM,GAC9Ed,EAAWD,EAAQqD,OAAOL,IAC1B7B,EAAcC,OAAO4B,GACrBb,EAAW,SAAD,OAAUE,EAAV,QAIZ,UACE,yCAAW,uBAAOhC,SApCtB,SAA0BC,GACxBgC,EAAWhC,EAAME,OAAOJ,aAoCtB,2CAAa,uBAAOC,SAlCxB,SAA4BC,GAC1BkC,EAAUlC,EAAME,OAAOJ,aAkCrB,wBAAQkD,KAAK,SAAb,qBCASC,EAzCC,SAAC,GAA6B,IAA3BvD,EAA0B,EAA1BA,QAASC,EAAiB,EAAjBA,WAC1Be,QAAQC,IAAR,6BAAkCjB,EAAQoD,SAC1CpC,QAAQC,IAAI,WAAYjB,GAExB,IAAIwD,EAAe,GAEnBxD,EAAQU,SAAQ,SAAAC,IACA,IAAXA,EAAEI,OACHyC,EAAeA,EAAaH,OAAO1C,OAKvCK,QAAQC,IAAI,gBAAiBuC,GAE7B,IAAMC,EAAc,SAAC9C,GACnB,OAAO,WACFkC,OAAOC,QAAP,iBAAyBnC,EAAEC,KAA3B,eAAsCD,EAAEiB,GAAxC,SACDT,EAAcQ,SAAShB,EAAEiB,IAAIJ,MAAM,WACjC,IAAIf,EAAcT,EAAQqD,SAC1B5C,EAAYiD,OAAOjD,EAAYkD,WAAU,SAAAC,GAAI,OAAIA,EAAKhC,KAAOjB,EAAEiB,MAAK,GACpEZ,QAAQC,IAAIjB,GACZgB,QAAQC,IAAIR,GAEZR,EAAWQ,MAEbO,QAAQC,IAAR,sBAA2BN,EAAEiB,QAKnC,OAAO,8BACJ4B,EAAaN,KAAK,SAAAvC,GACjB,OAAO,gCACJA,EAAEC,KADE,IACKD,EAAEsC,OADP,IAEL,wBAAQY,QAASJ,EAAY9C,GAA7B,sBAFeA,EAAEC,YCTVkD,EA3BM,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACtB,GAAgB,OAAZA,EACF,OAAO,KAGT,IAAMC,EAAQ,CACZC,MAAO,QACPC,WAAY,YACZC,SAAU,GACVC,YAAa,QACbC,aAAc,EACdC,QAAS,GACTC,aAAc,IAQhB,OALGR,EAAQS,WAAW,iBAEpBR,EAAMC,MAAQ,OAId,qBAAKD,MAAOA,EAAZ,SACGD,KCqBQU,EApCH,WACV,MAA8BrC,mBAAS,IAAvC,mBAAOpC,EAAP,KAAgBC,EAAhB,KACA,EAAoCmC,mBAAS,IAA7C,mBAAOlC,EAAP,KAAmBC,EAAnB,KACA,EAA8BiC,mBAAS,MAAvC,mBAAO2B,EAAP,KAAgB5B,EAAhB,KACA,EAA8CC,mBAAS,IAAvD,mBAAOsC,EAAP,KAAwBC,EAAxB,KAYA,OAVAC,qBAAU,WAGRzD,EAAcW,OAAON,MAAK,SAAAC,GACxBxB,EAAWwB,GAEXkD,EAAmBlD,EAASyB,KAAI,SAAA2B,GAAS,OAAO,2BAAIA,GAAX,IAAiB9D,MAAK,aAEhE,IAGD,gCACE,2CAEA,cAAC,EAAD,CAAcgD,QAASA,IAEvB,cAAC,EAAD,CAAQ/D,QAAS0E,EAAiBzE,WAAY0E,EAAoBzE,WAAYA,EAAYC,cAAeA,IAGzG,2CAEA,cAAC,EAAD,CAAYH,QAASA,EAASC,WAAYA,EAAYkC,WAAYA,IAElE,yCAEA,cAAC,EAAD,CAASnC,QAAS0E,EAAiBzE,WAAY0E,QC1BtCG,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBxD,MAAK,YAAkD,IAA/CyD,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCAdO,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,SAMjDX,M","file":"static/js/main.c46193c0.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({persons, setPersons, searchName, setSearchName}) => {\r\n  const handleSearchNameChange = (event) => {\r\n    event.preventDefault()\r\n    setSearchName(event.target.value)\r\n    var personsCopy = persons\r\n    personsCopy.forEach(p => {\r\n      if (p.name.toLowerCase().match(event.target.value.toLowerCase())) {\r\n        p.show = true\r\n      } else {\r\n        p.show = false\r\n        console.log('change something to False')\r\n      }\r\n    });\r\n    setPersons(personsCopy)\r\n    console.log('setPersons...', event.target.value)\r\n  }\r\n  return (\r\n    <div>filter shown with <input value={searchName} onChange={handleSearchNameChange} /></div>\r\n  )\r\n}\r\n\r\nexport default Filter","import axios from \"axios\";\r\n\r\n// const baseUrl = 'http://localhost:3001/persons' // json-server\r\nconst baseUrl = '/api/persons' // backend\r\n\r\nconst create = (object) => {\r\n  const request = axios.post(baseUrl, object)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deleteId = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response)\r\n}\r\n\r\nconst read = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id ,object) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, object)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst personService = {\r\n  create, deleteId, read, update\r\n}\r\n\r\nexport default personService","import React, { useState } from 'react'\r\nimport personService from '../services/persons'\r\n\r\nconst PersonForm = ({persons, setPersons, setMessage}) => {\r\n  const [newName, setNewName] = useState('')\r\n  const [newNum, setNewNum] = useState('')\r\n  function handleNameChange(event) {\r\n    setNewName(event.target.value)\r\n  }\r\n  function handleNumberChange(event) {\r\n    setNewNum(event.target.value)\r\n  }\r\n  const submitNewPerson = (event) => {\r\n    event.preventDefault()\r\n    if(JSON.stringify(persons).indexOf(newName) !== -1) { // https://www.cnblogs.com/leiting/p/9253461.html\r\n      // window.alert(`${newName} is already added to phonebook`)\r\n      if(window.confirm(`${newName} is already added to phonebook,replace the old number with a new one?`)) {\r\n        var id\r\n        persons.forEach(element => {\r\n          if(element.name === newName) {\r\n            id = element.id\r\n          }\r\n        });\r\n        const newPerson = { id: id, name: newName, number: newNum, show: true }\r\n        personService.update(id, newPerson).then(response => {\r\n          console.log(response)\r\n          setPersons(persons.map(p => p.id !== response.id ? p : response))\r\n          console.log(`update successful id=${id}`)\r\n        }).catch(response => {\r\n          setMessage(`Information of ${newName} has already been removed from server.`)\r\n          console.log('update error')\r\n        })\r\n      }\r\n    } else {\r\n      const newPerson = { id:persons.length+1, name: newName, number: newNum, show: true }\r\n      setPersons(persons.concat(newPerson))\r\n      personService.create(newPerson)\r\n      setMessage(`Added ${newName}.`)\r\n    }\r\n  }\r\n  return (\r\n    <form onSubmit={submitNewPerson}>\r\n      <div>name: <input onChange={handleNameChange} /></div>\r\n      <div>number: <input onChange={handleNumberChange} /></div>\r\n      <button type=\"submit\">add</button>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\nimport personService from '../services/persons';\r\n\r\nconst Persons = ({ persons, setPersons }) => {\r\n  console.log(`rendering Persons: ${persons.length}`)\r\n  console.log('persons:', persons)\r\n  // const[personToShow, SetPersonToShow] = useState([])\r\n  var personToShow = []\r\n\r\n  persons.forEach(p => {\r\n    if(p.show === true) {\r\n      personToShow = personToShow.concat(p)\r\n      // SetPersonToShow(personToShow.concat(p))\r\n    }\r\n  })\r\n\r\n  console.log('personToShow:', personToShow)\r\n  \r\n  const clickDelete = (p) => {\r\n    return () => {\r\n      if(window.confirm(`Delete ${p.name} id:${p.id} ?`)) {\r\n        personService.deleteId(p.id).then( () => {\r\n          var personsCopy = persons.concat()\r\n          personsCopy.splice(personsCopy.findIndex(item => item.id === p.id), 1)\r\n          console.log(persons)\r\n          console.log(personsCopy)\r\n          // console.log(personsCopy)\r\n          setPersons(personsCopy)\r\n        })\r\n        console.log(`deleteID id=${p.id}`)\r\n      }\r\n    }\r\n  }\r\n\r\n  return <div>\r\n    {personToShow.map( p => {\r\n      return <div key={p.name}>\r\n        {p.name} {p.number} {}\r\n        <button onClick={clickDelete(p)}>delele</button>\r\n      </div>\r\n    })}\r\n  </div>\r\n};\r\n\r\nexport default Persons","const Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  const style = {\r\n    color: 'green',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  }\r\n\r\n  if(message.startsWith('Information')) {\r\n    // Information of X has already been removed from server.\r\n    style.color = 'red'\r\n  }\r\n\r\n  return (\r\n    <div style={style}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport Notification from './components/Notification'\r\nimport personService from './services/persons'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [searchName, setSearchName] = useState('')\r\n  const [message, setMessage] = useState(null)\r\n  const [personsWithShow, setPersonsWithShow] = useState([])\r\n\r\n  useEffect(() => {\r\n    // 需要运行一个 json-server\r\n    // npx json-server db.json -p 3001 -w\r\n    personService.read().then(response => {\r\n      setPersons(response)\r\n      // setPersonsWithShow({...response, show1: true})\r\n      setPersonsWithShow(response.map(elem => {return {...elem, show:true}}))\r\n    })\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n\r\n      <Notification message={message} />\r\n\r\n      <Filter persons={personsWithShow} setPersons={setPersonsWithShow} searchName={searchName} setSearchName={setSearchName}/>\r\n      {/* <Filter persons={persons} personToShow={personToShow} SetPersonToShow={SetPersonToShow} searchName={searchName} setSearchName={setSearchName}/> */}\r\n\r\n      <h3>Add a new</h3>\r\n\r\n      <PersonForm persons={persons} setPersons={setPersons} setMessage={setMessage}/>\r\n\r\n      <h3>Numbers</h3>\r\n\r\n      <Persons persons={personsWithShow} setPersons={setPersonsWithShow}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}